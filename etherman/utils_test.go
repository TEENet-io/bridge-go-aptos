package etherman

import (
	"math/big"
	"testing"

	"github.com/ethereum/go-ethereum/common"
	"github.com/stretchr/testify/assert"
)

func TestEncodePacked(t *testing.T) {
	encode := EncodePacked(
		"0xee74ad6d5dd1c2980a328836bfcad8beceee07c6239fb322bc8bb13ce632523e",
		"0xc3c5a225ceda1e35378ae41f99e2171f04055d2d",
		big.NewInt(100),
	)
	assert.Equal(t,
		"ee74ad6d5dd1c2980a328836bfcad8beceee07c6239fb322bc8bb13ce632523ec3c5a225ceda1e35378ae41f99e2171f04055d2d0000000000000000000000000000000000000000000000000000000000000064",
		common.Bytes2Hex(encode),
	)

	encode = EncodePacked(
		"0x31d387e096e0b53d7b28a137ce7e706a5870aaf6d3937676370114b3232db362",
		"0xa0Ee7A142d267C1f36714E4a8F75612F20a79720",
		big.NewInt(100),
		[]string{
			"0x56ff6ca1304cf22aa0221c5e392fcc7c38cfd99b47a5692c1a92f52e68b91873",
			"0x4657a38cf941f4d9798cdccab351ae9331007b0dcc94a06124a2aef804b5264d",
		},
		[]*big.Int{big.NewInt(0), big.NewInt(4)},
	)

	expected := "0x31d387e096e0b53d7b28a137ce7e706a5870aaf6d3937676370114b3232db362a0ee7a142d267c1f36714e4a8f75612f20a79720000000000000000000000000000000000000000000000000000000000000006456ff6ca1304cf22aa0221c5e392fcc7c38cfd99b47a5692c1a92f52e68b918734657a38cf941f4d9798cdccab351ae9331007b0dcc94a06124a2aef804b5264d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004"
	assert.Equal(t, expected, "0x"+common.Bytes2Hex(encode))
}
